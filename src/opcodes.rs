use crate::{ConstantDynamic, Handle};
use java_string::JavaStr;
use std::borrow::Cow;
use strum::{Display, FromRepr};

#[derive(Debug, Copy, Clone, PartialEq, Eq, PartialOrd, Ord, Hash, Display, FromRepr)]
#[repr(u8)]
#[non_exhaustive]
pub enum Opcode {
    Nop = 0,
    AconstNull = 1,
    IconstM1 = 2,
    Iconst0 = 3,
    Iconst1 = 4,
    Iconst2 = 5,
    Iconst3 = 6,
    Iconst4 = 7,
    Iconst5 = 8,
    Lconst0 = 9,
    Lconst1 = 10,
    Fconst0 = 11,
    Fconst1 = 12,
    Fconst2 = 13,
    Dconst0 = 14,
    Dconst1 = 15,
    Bipush = 16,
    Sipush = 17,
    Ldc = 18,
    Iload = 21,
    Lload = 22,
    Fload = 23,
    Dload = 24,
    Aload = 25,
    Iaload = 46,
    Laload = 47,
    Faload = 48,
    Daload = 49,
    Aaload = 50,
    Baload = 51,
    Caload = 52,
    Saload = 53,
    Istore = 54,
    Lstore = 55,
    Fstore = 56,
    Dstore = 57,
    Astore = 58,
    Iastore = 79,
    Lastore = 80,
    Fastore = 81,
    Dastore = 82,
    Aastore = 83,
    Bastore = 84,
    Castore = 85,
    Sastore = 86,
    Pop = 87,
    Pop2 = 88,
    Dup = 89,
    DupX1 = 90,
    DupX2 = 91,
    Dup2 = 92,
    Dup2X1 = 93,
    Dup2X2 = 94,
    Swap = 95,
    Iadd = 96,
    Ladd = 97,
    Fadd = 98,
    Dadd = 99,
    Isub = 100,
    Lsub = 101,
    Fsub = 102,
    Dsub = 103,
    Imul = 104,
    Lmul = 105,
    Fmul = 106,
    Dmul = 107,
    Idiv = 108,
    Ldiv = 109,
    Fdiv = 110,
    Ddiv = 111,
    Irem = 112,
    Lrem = 113,
    Frem = 114,
    Drem = 115,
    Ineg = 116,
    Lneg = 117,
    Fneg = 118,
    Dneg = 119,
    Ishl = 120,
    Lshl = 121,
    Ishr = 122,
    Lshr = 123,
    Iushr = 124,
    Lushr = 125,
    Iand = 126,
    Land = 127,
    Ior = 128,
    Lor = 129,
    Ixor = 130,
    Lxor = 131,
    Iinc = 132,
    I2l = 133,
    I2f = 134,
    I2d = 135,
    L2i = 136,
    L2f = 137,
    L2d = 138,
    F2i = 139,
    F2l = 140,
    F2d = 141,
    D2i = 142,
    D2l = 143,
    D2f = 144,
    I2b = 145,
    I2c = 146,
    I2s = 147,
    Lcmp = 148,
    Fcmpl = 149,
    Fcmpg = 150,
    Dcmpl = 151,
    Dcmpg = 152,
    Ifeq = 153,
    Ifne = 154,
    Iflt = 155,
    Ifge = 156,
    Ifgt = 157,
    Ifle = 158,
    IfIcmpeq = 159,
    IfIcmpne = 160,
    IfIcmplt = 161,
    IfIcmpge = 162,
    IfIcmpgt = 163,
    IfIcmple = 164,
    IfAcmpeq = 165,
    IfAcmpne = 166,
    Goto = 167,
    Jsr = 168,
    Ret = 169,
    Tableswitch = 170,
    Lookupswitch = 171,
    Ireturn = 172,
    Lreturn = 173,
    Freturn = 174,
    Dreturn = 175,
    Areturn = 176,
    Return = 177,
    Getstatic = 178,
    Putstatic = 179,
    Getfield = 180,
    Putfield = 181,
    Invokevirtual = 182,
    Invokespecial = 183,
    Invokestatic = 184,
    Invokeinterface = 185,
    Invokedynamic = 186,
    New = 187,
    Newarray = 188,
    Anewarray = 189,
    Arraylength = 190,
    Athrow = 191,
    Checkcast = 192,
    Instanceof = 193,
    Monitorenter = 194,
    Monitorexit = 195,
    Multianewarray = 197,
    Ifnull = 198,
    Ifnonnull = 199,
}

#[derive(Debug, Copy, Clone, PartialEq, Eq, PartialOrd, Ord, Hash, Display, FromRepr)]
#[repr(u8)]
pub enum NewarrayType {
    Boolean = 4,
    Char = 5,
    Float = 6,
    Double = 7,
    Byte = 8,
    Short = 9,
    Int = 10,
    Long = 11,
}

#[derive(Debug, Clone, PartialEq, PartialOrd)]
pub enum LdcConstant<'class> {
    Integer(i32),
    Float(f32),
    Long(i64),
    Double(f64),
    String(Cow<'class, JavaStr>),
    Class(Cow<'class, JavaStr>),
    MethodType(Cow<'class, JavaStr>),
    Handle(Handle<'class>),
    ConstantDynamic(ConstantDynamic<'class>),
}
